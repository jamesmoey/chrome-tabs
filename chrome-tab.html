<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<dom-module id="chrome-tab">
  <template>
    <style>
      :host {
        position: relative;
        flex:1;
        max-width: 290px;
        height: 35px;
        font-size: 12px;
        display: flex;
        overflow: hidden;
        min-width: 70px;
        outline: none;
        --default-tab-background-color: #d0d0d0;
        --default-tab-selected-color: #f2f2f2;
        --default-tab-hover-color: #e8e8e8;
      }

      :host:not(:first-child) {
        margin-left:-15px
      }

      .tab-left {
        border-top: 35px solid transparent;
        border-right: 15px solid var(--tab-background-color,--default-tab-background-color);
        z-index:1;
      }
      .tab-right {
        border-top: 35px solid transparent;
        border-left: 15px solid var(--tab-background-color,--default-tab-background-color);
        z-index:1;
      }
      .tab-content {
        flex: 1;
        background: var(--tab-background-color,--default-tab-background-color);
        display: flex;
        flex-direction: row;
        border-top: 1px solid var(--tab-background-color,--default-tab-background-color);
        white-space: nowrap;
        overflow: hidden;
        align-items: center;
      }
      .tab-title {
        text-overflow: ellipsis;
        overflow: hidden;
        flex: 1;
      }
      .tab-icon {
        width:20px;
        margin-right:5px;
      }

      :host(:hover) .tab-content {
        background: var(--tab-hover-color, --default-tab-hover-color);
        border-top: 1px solid var(--tab-hover-color, --default-tab-hover-color);
      }
      :host(:hover) .tab-left {
        border-right-color: var(--tab-hover-color, --default-tab-hover-color);
      }
      :host(:hover) .tab-right {
        border-left-color: var(--tab-hover-color, --default-tab-hover-color);
      }

      :host(.iron-selected) {
        z-index: 2;
      }
      :host(.iron-selected) .tab-content {
        background: var(--tab-selected-color,--default-tab-selected-color);
        border-top-color: var(--tab-selected-color,--default-tab-selected-color);
      }
      :host(.iron-selected) .tab-left {
        border-right-color: var(--tab-selected-color,--default-tab-selected-color);
      }
      :host(.iron-selected) .tab-right {
        border-left-color: var(--tab-selected-color,--default-tab-selected-color);
      }

      .bottom-bar {
        position: absolute;
        bottom: 0;
        height: 4.5px;
        left: 0;
        width: 100%;
        background: #f2f2f2;
        box-shadow: 0 -0.05em rgba(0,0,0,0.27);
        z-index: 1;
      }
      .shadow {
        position: absolute;
        border-left-color: rgba(130, 130, 130, 0.6);
        border-right-color: rgba(130, 130, 130, 0.6);
      }
      .tab-right.shadow {
        right: -1px;
      }
      .tab-left.shadow {
        left: -1px;
      }
      .tab-close {
        width: 18px;
        box-sizing: border-box;
        border-radius: 18px;
        text-align: center;
        display: flex;
        align-content: stretch;
        flex-direction: column-reverse;
      }
      .tab-close:before {
        content: "\00D7";
        font-size: 18px;
        line-height: 18px;
      }
      .tab-close:hover {
        background: #e25c4b;
        color: #fff;
      }

    </style>

    <div class="tab-left shadow"></div>
    <div class="tab-right shadow"></div>
    <div class="tab-left"></div>
    <div class="tab-content">
      <div class="tab-icon"></div>
      <div class="tab-title"><slot></slot></div>
      <div class="tab-close"></div>
    </div>
    <div class="tab-right"></div>

  </template>
  <script>
    Polymer({
      is: 'chrome-tab',

      properties: {
        icon: String,
        selected: {
          type: Boolean,
          value: false,
          notify: true,
        },
        closable: {
          type: Boolean,
          value: true,
        },
      },

    });
  </script>
</dom-module>
